<!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    <style>
        .data-entry {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .media-display img, .media-display video {
            max-width: 100%;
            height: auto;
            display: block; /* Remove extra space below images */
        }
    </style>
</head>
<body>
    <h2>Welcome, {{ user.username }}!</h2>
    <p>Your email: {{ user.email }}</p>

    <a href="{% url 'add_data' %}">
        <button>+</button> Add New Entry
    </a>

    <h3>Your Entered Details:</h3>
    {% if user_data_entries %}
        {% for entry in user_data_entries %}
            <div class="data-entry">
                <p><strong>Username:</strong> {{ entry.username_field }}</p>
                <p><strong>Phone Number:</strong> {{ entry.phone_number }}</p>

                {# Display media if available #}
                {% if entry.media_file %}
                    <div class="media-display">
                        {% if entry.media_type == 'image' %}
                            <img src="{{ entry.media_file.url }}" alt="Uploaded Image">
                        {% elif entry.media_type == 'video' %}
                            <video controls>
                                <source src="{{ entry.media_file.url }}" type="video/mp4"> {# You might need to adjust type based on actual video format #}
                                Your browser does not support the video tag.
                            </video>
                        {% else %}
                            <p><a href="{{ entry.media_file.url }}" target="_blank">Download File</a></p>
                        {% endif %}
                    </div>
                {% endif %}

                <a href="{% url 'edit_data' entry.id %}"><button>Edit</button></a>
                <form action="{% url 'delete_data' entry.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit">Delete</button>
                </form>
            </div>
        {% endfor %}
    {% else %}
        <p>No data entries yet. Click the '+' button to add one!</p>
    {% endif %}

    <p><a href="{% url 'logout' %}">Logout</a></p>
</body>
</html>